

https://docs.openstack.org/keystone/train/install/keystone-install-ubuntu.html

Keystone


wei@wei-ThinkPad-X1-Extreme:~$ sudo mysql -u root --password=MARIADB_PASS --execute="CREATE DATABASE IF NOT EXISTS keystone;GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' IDENTIFIED BY 'KEYSTONE_DBPASS';GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' IDENTIFIED BY 'KEYSTONE_DBPASS';"

wei@wei-ThinkPad-X1-Extreme:~$ sudo apt-get install -y keystone
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages were automatically installed and are no longer required:
  fonts-liberation2 fonts-opensymbol gir1.2-geocodeglib-1.0
  gir1.2-gst-plugins-base-1.0 gir1.2-gstreamer-1.0 gir1.2-gudev-1.0
  gir1.2-udisks-2.0 grilo-plugins-0.3-base gstreamer1.0-gtk3
  libboost-date-time1.65.1 libboost-filesystem1.65.1 libboost-iostreams1.65.1
  libboost-locale1.65.1 libcdr-0.1-1 libclucene-contribs1v5 libclucene-core1v5
  libcmis-0.5-5v5 libcolamd2 libdazzle-1.0-0 libe-book-0.1-1
  libedataserverui-1.2-2 libeot0 libepubgen-0.1-1 libetonyek-0.1-1 libexiv2-14
  libfreerdp-client2-2 libfreerdp2-2 libgc1c2 libgee-0.8-2 libgexiv2-2
  libgom-1.0-0 libgpgmepp6 libgpod-common libgpod4 liblangtag-common
  liblangtag1 liblirc-client0 libllvm8 liblua5.3-0 libmediaart-2.0-0
  libmspub-0.1-1 libodfgen-0.1-1 libqqwing2v5 libraw16 librevenge-0.0-0
  libsgutils2-2 libssh-4 libsuitesparseconfig5 libvncclient1 libwinpr2-2
  libxapian30 libxmlsec1-nss lp-solve media-player-info syslinux
  syslinux-common syslinux-legacy usb-creator-common
Use 'sudo apt autoremove' to remove them.
The following additional packages will be installed:
  alembic apache2 apache2-bin apache2-data apache2-utils javascript-common
  keystone-common libapache2-mod-wsgi-py3 libapr1 libaprutil1
  libaprutil1-dbd-sqlite3 libaprutil1-ldap libjs-jquery libjs-sphinxdoc
  libjs-underscore liblua5.2-0 libxmlsec1-openssl pycadf-common
  python-pastedeploy-tpl python3-alembic python3-amqp python3-aniso8601
  python3-anyjson python3-bcrypt python3-cachetools python3-click
  python3-colorama python3-defusedxml python3-dnspython python3-eventlet
  python3-extras python3-fasteners python3-fixtures python3-flask
  python3-flask-restful python3-future python3-futurist python3-greenlet
  python3-itsdangerous python3-jinja2 python3-keystone
  python3-keystonemiddleware python3-kombu python3-ldap python3-linecache2
  python3-memcache python3-migrate python3-mimeparse python3-oslo.cache
  python3-oslo.concurrency python3-oslo.context python3-oslo.db
  python3-oslo.log python3-oslo.messaging python3-oslo.middleware
  python3-oslo.policy python3-oslo.service python3-oslo.upgradecheck
  python3-osprofiler python3-passlib python3-paste python3-pastedeploy
  python3-pastescript python3-posix-ipc python3-pyasn1 python3-pyasn1-modules
  python3-pycadf python3-pyinotify python3-pymysql python3-pysaml2
  python3-repoze.lru python3-routes python3-scrypt python3-sqlalchemy
  python3-sqlalchemy-ext python3-sqlparse python3-tempita python3-tenacity
  python3-testresources python3-testscenarios python3-testtools
  python3-traceback2 python3-unittest2 python3-vine python3-webob
  python3-werkzeug xmlsec1
Suggested packages:
  apache2-doc apache2-suexec-pristine | apache2-suexec-custom python3-editor
  python-amqp-doc python-eventlet-doc python-flask-doc python-future-doc
  python-futurist-doc python-greenlet-doc python-greenlet-dev
  python3-greenlet-dbg python-jinja2-doc python3-ldappool python-kombu-doc
  python3-boto python3-django python3-pymongo python3-redis python-migrate-doc
  python-oslo.cache-doc python-oslo.concurrency-doc python-oslo.log-doc
  python3-confluent-kafka python-oslo.middleware-doc python-oslo.policy-doc
  python-oslo.service-doc libapache2-mod-python libapache2-mod-scgi
  libjs-mochikit python3-cherrypy3 python-pyinotify-doc python-pymysql-doc
  python3-repoze.who python-sqlalchemy-doc python3-psycopg2 python3-mysqldb
  python3-fdb python-sqlparse-doc python-tenacity-doc python-testtools-doc
  python-webob-doc ipython3 python3-termcolor python3-watchdog
  python-werkzeug-doc
The following NEW packages will be installed:
  alembic apache2 apache2-bin apache2-data apache2-utils javascript-common
  keystone keystone-common libapache2-mod-wsgi-py3 libapr1 libaprutil1
  libaprutil1-dbd-sqlite3 libaprutil1-ldap libjs-jquery libjs-sphinxdoc
  libjs-underscore liblua5.2-0 libxmlsec1-openssl pycadf-common
  python-pastedeploy-tpl python3-alembic python3-amqp python3-aniso8601
  python3-anyjson python3-bcrypt python3-cachetools python3-click
  python3-colorama python3-defusedxml python3-dnspython python3-eventlet
  python3-extras python3-fasteners python3-fixtures python3-flask
  python3-flask-restful python3-future python3-futurist python3-greenlet
  python3-itsdangerous python3-jinja2 python3-keystone
  python3-keystonemiddleware python3-kombu python3-ldap python3-linecache2
  python3-memcache python3-migrate python3-mimeparse python3-oslo.cache
  python3-oslo.concurrency python3-oslo.context python3-oslo.db
  python3-oslo.log python3-oslo.messaging python3-oslo.middleware
  python3-oslo.policy python3-oslo.service python3-oslo.upgradecheck
  python3-osprofiler python3-passlib python3-paste python3-pastedeploy
  python3-pastescript python3-posix-ipc python3-pyasn1 python3-pyasn1-modules
  python3-pycadf python3-pyinotify python3-pymysql python3-pysaml2
  python3-repoze.lru python3-routes python3-scrypt python3-sqlalchemy
  python3-sqlalchemy-ext python3-sqlparse python3-tempita python3-tenacity
  python3-testresources python3-testscenarios python3-testtools
  python3-traceback2 python3-unittest2 python3-vine python3-webob
  python3-werkzeug xmlsec1
0 upgraded, 88 newly installed, 0 to remove and 0 not upgraded.
Need to get 8,274 kB of archives.
After this operation, 45.5 MB of additional disk space will be used.
Get:1 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-sqlalchemy all 1.2.18+ds1-2ubuntu2~cloud0 [728 kB]
Get:2 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 libapr1 amd64 1.6.3-2 [90.9 kB]
Get:3 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 libaprutil1 amd64 1.6.1-2 [84.4 kB]
Get:4 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 libaprutil1-dbd-sqlite3 amd64 1.6.1-2 [10.6 kB]
Get:5 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 libaprutil1-ldap amd64 1.6.1-2 [8,764 B]
Get:6 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 liblua5.2-0 amd64 5.2.4-1.1build1 [108 kB]
Get:7 http://cn.archive.ubuntu.com/ubuntu bionic-updates/main amd64 apache2-bin amd64 2.4.29-1ubuntu4.11 [1,071 kB]
Get:8 http://cn.archive.ubuntu.com/ubuntu bionic-updates/main amd64 apache2-utils amd64 2.4.29-1ubuntu4.11 [83.9 kB]
Get:9 http://cn.archive.ubuntu.com/ubuntu bionic-updates/main amd64 apache2-data all 2.4.29-1ubuntu4.11 [160 kB]
Get:10 http://cn.archive.ubuntu.com/ubuntu bionic-updates/main amd64 apache2 amd64 2.4.29-1ubuntu4.11 [95.1 kB]
Get:11 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 libjs-jquery all 3.2.1-1 [152 kB]
Get:12 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 libjs-underscore all 1.8.3~dfsg-1 [59.9 kB]
Get:13 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 javascript-common all 11 [6,066 B]
Get:14 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 libapache2-mod-wsgi-py3 amd64 4.5.17-1 [87.8 kB]
Get:15 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 libxmlsec1-openssl amd64 1.2.25-1build1 [73.6 kB]
Get:16 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 pycadf-common all 2.7.0-0ubuntu1 [4,440 B]
Get:17 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python-pastedeploy-tpl all 1.5.2-4 [4,796 B]
Get:18 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-vine all 1.1.4+dfsg-2 [15.7 kB]
Get:19 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-aniso8601 all 2.0.0-1 [17.9 kB]
Get:20 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-anyjson all 0.3.3-1build1 [7,062 B]
Get:21 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-colorama all 0.3.7-1 [14.9 kB]
Get:22 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-click all 6.7-3 [56.5 kB]
Get:23 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-defusedxml all 0.5.0-1ubuntu1 [19.2 kB]
Get:24 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-dnspython all 1.15.0-1 [85.0 kB]
Get:25 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-greenlet amd64 0.4.12-2 [15.2 kB]
Get:26 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-extras all 1.0.0-3 [7,480 B]
Get:27 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-fasteners all 0.12.0-3 [13.5 kB]
Get:28 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-linecache2 all 1.0.0-3 [12.5 kB]
Get:29 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-traceback2 all 1.4.0-5 [16.4 kB]
Get:30 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-unittest2 all 1.1.0-6.1 [69.2 kB]
Get:31 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-testtools all 2.3.0-3ubuntu2 [124 kB]
Get:32 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-fixtures all 3.0.0-2 [32.4 kB]
Get:33 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-itsdangerous all 0.24+dfsg1-2 [12.0 kB]
Get:34 http://cn.archive.ubuntu.com/ubuntu bionic-updates/main amd64 python3-jinja2 all 2.10-1ubuntu0.18.04.1 [95.4 kB]
Get:35 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-werkzeug all 0.14.1+dfsg1-1 [174 kB]
Get:36 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-flask-restful all 0.3.6-1 [22.3 kB]
Get:37 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-future all 0.15.2-4ubuntu2 [333 kB]
Get:38 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-pyinotify all 0.9.6-1 [24.7 kB]
Get:39 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-pycadf all 2.7.0-0ubuntu1 [17.4 kB]
Get:40 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-kombu all 4.1.0-1 [126 kB]
Get:41 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-pyasn1 all 0.4.2-3 [46.8 kB]
Get:42 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-pyasn1-modules all 0.2.1-0.2 [32.9 kB]
Get:43 http://cn.archive.ubuntu.com/ubuntu bionic-updates/main amd64 python3-ldap amd64 3.0.0-1ubuntu0.1 [87.1 kB]
Get:44 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-sqlparse all 0.2.4-0.1 [28.1 kB]
Get:45 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-tempita all 0.5.2-2 [13.9 kB]
Get:46 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-posix-ipc amd64 0.9.8-3 [15.3 kB]
Get:47 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-testresources all 2.0.0-2 [26.4 kB]
Get:48 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-paste all 2.0.3+dfsg-4ubuntu1 [456 kB]
Get:49 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-pastedeploy all 1.5.2-4 [13.4 kB]
Get:50 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-repoze.lru all 0.7-1 [11.7 kB]
Get:51 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-routes all 2.4.1-1 [28.4 kB]
Get:52 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 python3-pastescript all 2.0.2-2 [54.6 kB]
Get:53 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-pymysql all 0.8.0-1 [60.1 kB]
Get:54 http://cn.archive.ubuntu.com/ubuntu bionic/main amd64 xmlsec1 amd64 1.2.25-1build1 [24.1 kB]
Get:55 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-scrypt amd64 0.8.0-0ubuntu3 [23.7 kB]
Get:56 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-bcrypt amd64 3.1.4-2 [29.9 kB]
Get:57 http://cn.archive.ubuntu.com/ubuntu bionic/universe amd64 python3-passlib all 1.7.1-1 [347 kB]
Get:58 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/stein/main amd64 python3-alembic all 1.0.0-2ubuntu2~cloud0 [111 kB]
Get:59 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 libjs-sphinxdoc all 1.8.5-3~cloud0 [96.6 kB]
Get:60 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/stein/main amd64 alembic all 1.0.0-2ubuntu2~cloud0 [369 kB]
Get:61 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-amqp all 2.5.0-2~cloud0 [42.2 kB]
Get:62 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-cachetools all 3.1.0-2~cloud0 [9,892 B]
Get:63 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-eventlet all 0.25.0-0ubuntu1~cloud0 [173 kB]
Get:64 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-mimeparse all 1.6.0-2~cloud0 [7,236 B]
Get:65 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/stein/main amd64 python3-flask all 1.0.2-3~cloud0 [93.2 kB]
Get:66 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-futurist all 1.8.1-2~cloud0 [24.5 kB]
Get:67 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/stein/main amd64 python3-memcache all 1.59-1~cloud0 [18.2 kB]
Get:68 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-oslo.context all 1:2.23.0-0ubuntu1~cloud0 [14.7 kB]
Get:69 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-oslo.log all 3.44.1-0ubuntu1~cloud0 [45.6 kB]
Get:70 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-oslo.cache all 1.37.0-0ubuntu1~cloud0 [34.5 kB]
Get:71 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/stein/main amd64 python3-webob all 1:1.8.5-1~cloud0 [89.3 kB]
Get:72 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-keystonemiddleware all 7.0.1-0ubuntu1~cloud0 [68.6 kB]
Get:73 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-migrate all 0.12.0-3~cloud0 [79.3 kB]
Get:74 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-oslo.concurrency all 3.30.0-0ubuntu1~cloud0 [30.8 kB]
Get:75 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/stein/main amd64 python3-testscenarios all 0.5.0-2~cloud0 [13.5 kB]
Get:76 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-oslo.db all 5.0.2-0ubuntu1~cloud0 [115 kB]
Get:77 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-oslo.middleware all 3.38.1-0ubuntu1~cloud0 [33.1 kB]
Get:78 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-oslo.service all 1.40.2-0ubuntu1~cloud0 [50.6 kB]
Get:79 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-tenacity all 5.1.1-0ubuntu2~cloud0 [34.9 kB]
Get:80 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-oslo.messaging all 9.7.1-0ubuntu3~cloud0 [149 kB]
Get:81 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-oslo.policy all 2.3.2-0ubuntu1~cloud0 [50.3 kB]
Get:82 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-oslo.upgradecheck all 0.3.2-0ubuntu1~cloud0 [7,484 B]
Get:83 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-osprofiler all 2.8.2-0ubuntu2~cloud0 [48.1 kB]
Get:84 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/stein/main amd64 python3-pysaml2 all 4.5.0+dfsg1-0ubuntu2~cloud0 [204 kB]
Get:85 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-sqlalchemy-ext amd64 1.2.18+ds1-2ubuntu2~cloud0 [19.7 kB]
Get:86 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 keystone-common all 2:16.0.0-0ubuntu1~cloud0 [53.7 kB]
Get:87 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 python3-keystone all 2:16.0.0-0ubuntu1~cloud0 [731 kB]
Get:88 http://ubuntu-cloud.archive.canonical.com/ubuntu bionic-updates/train/main amd64 keystone all 2:16.0.0-0ubuntu1~cloud0 [17.6 kB]
Fetched 8,274 kB in 2min 25s (57.0 kB/s)                                       
Extracting templates from packages: 100%
Selecting previously unselected package libapr1:amd64.
(Reading database ... 204379 files and directories currently installed.)
Preparing to unpack .../00-libapr1_1.6.3-2_amd64.deb ...
Unpacking libapr1:amd64 (1.6.3-2) ...
Selecting previously unselected package libaprutil1:amd64.
Preparing to unpack .../01-libaprutil1_1.6.1-2_amd64.deb ...
Unpacking libaprutil1:amd64 (1.6.1-2) ...
Selecting previously unselected package libaprutil1-dbd-sqlite3:amd64.
Preparing to unpack .../02-libaprutil1-dbd-sqlite3_1.6.1-2_amd64.deb ...
Unpacking libaprutil1-dbd-sqlite3:amd64 (1.6.1-2) ...
Selecting previously unselected package libaprutil1-ldap:amd64.
Preparing to unpack .../03-libaprutil1-ldap_1.6.1-2_amd64.deb ...
Unpacking libaprutil1-ldap:amd64 (1.6.1-2) ...
Selecting previously unselected package liblua5.2-0:amd64.
Preparing to unpack .../04-liblua5.2-0_5.2.4-1.1build1_amd64.deb ...
Unpacking liblua5.2-0:amd64 (5.2.4-1.1build1) ...
Selecting previously unselected package apache2-bin.
Preparing to unpack .../05-apache2-bin_2.4.29-1ubuntu4.11_amd64.deb ...
Unpacking apache2-bin (2.4.29-1ubuntu4.11) ...
Selecting previously unselected package apache2-utils.
Preparing to unpack .../06-apache2-utils_2.4.29-1ubuntu4.11_amd64.deb ...
Unpacking apache2-utils (2.4.29-1ubuntu4.11) ...
Selecting previously unselected package apache2-data.
Preparing to unpack .../07-apache2-data_2.4.29-1ubuntu4.11_all.deb ...
Unpacking apache2-data (2.4.29-1ubuntu4.11) ...
Selecting previously unselected package apache2.
Preparing to unpack .../08-apache2_2.4.29-1ubuntu4.11_amd64.deb ...
Unpacking apache2 (2.4.29-1ubuntu4.11) ...
Selecting previously unselected package python3-sqlalchemy.
Preparing to unpack .../09-python3-sqlalchemy_1.2.18+ds1-2ubuntu2~cloud0_all.deb ...
Unpacking python3-sqlalchemy (1.2.18+ds1-2ubuntu2~cloud0) ...
Selecting previously unselected package python3-alembic.
Preparing to unpack .../10-python3-alembic_1.0.0-2ubuntu2~cloud0_all.deb ...
Unpacking python3-alembic (1.0.0-2ubuntu2~cloud0) ...
Selecting previously unselected package libjs-jquery.
Preparing to unpack .../11-libjs-jquery_3.2.1-1_all.deb ...
Unpacking libjs-jquery (3.2.1-1) ...
Selecting previously unselected package libjs-underscore.
Preparing to unpack .../12-libjs-underscore_1.8.3~dfsg-1_all.deb ...
Unpacking libjs-underscore (1.8.3~dfsg-1) ...
Selecting previously unselected package libjs-sphinxdoc.
Preparing to unpack .../13-libjs-sphinxdoc_1.8.5-3~cloud0_all.deb ...
Unpacking libjs-sphinxdoc (1.8.5-3~cloud0) ...
Selecting previously unselected package alembic.
Preparing to unpack .../14-alembic_1.0.0-2ubuntu2~cloud0_all.deb ...
Unpacking alembic (1.0.0-2ubuntu2~cloud0) ...
Selecting previously unselected package javascript-common.
Preparing to unpack .../15-javascript-common_11_all.deb ...
Unpacking javascript-common (11) ...
Selecting previously unselected package libapache2-mod-wsgi-py3.
Preparing to unpack .../16-libapache2-mod-wsgi-py3_4.5.17-1_amd64.deb ...
Unpacking libapache2-mod-wsgi-py3 (4.5.17-1) ...
Selecting previously unselected package libxmlsec1-openssl:amd64.
Preparing to unpack .../17-libxmlsec1-openssl_1.2.25-1build1_amd64.deb ...
Unpacking libxmlsec1-openssl:amd64 (1.2.25-1build1) ...
Selecting previously unselected package pycadf-common.
Preparing to unpack .../18-pycadf-common_2.7.0-0ubuntu1_all.deb ...
Unpacking pycadf-common (2.7.0-0ubuntu1) ...
Selecting previously unselected package python-pastedeploy-tpl.
Preparing to unpack .../19-python-pastedeploy-tpl_1.5.2-4_all.deb ...
Unpacking python-pastedeploy-tpl (1.5.2-4) ...
Selecting previously unselected package python3-vine.
Preparing to unpack .../20-python3-vine_1.1.4+dfsg-2_all.deb ...
Unpacking python3-vine (1.1.4+dfsg-2) ...
Selecting previously unselected package python3-amqp.
Preparing to unpack .../21-python3-amqp_2.5.0-2~cloud0_all.deb ...
Unpacking python3-amqp (2.5.0-2~cloud0) ...
Selecting previously unselected package python3-aniso8601.
Preparing to unpack .../22-python3-aniso8601_2.0.0-1_all.deb ...
Unpacking python3-aniso8601 (2.0.0-1) ...
Selecting previously unselected package python3-anyjson.
Preparing to unpack .../23-python3-anyjson_0.3.3-1build1_all.deb ...
Unpacking python3-anyjson (0.3.3-1build1) ...
Selecting previously unselected package python3-cachetools.
Preparing to unpack .../24-python3-cachetools_3.1.0-2~cloud0_all.deb ...
Unpacking python3-cachetools (3.1.0-2~cloud0) ...
Selecting previously unselected package python3-colorama.
Preparing to unpack .../25-python3-colorama_0.3.7-1_all.deb ...
Unpacking python3-colorama (0.3.7-1) ...
Selecting previously unselected package python3-click.
Preparing to unpack .../26-python3-click_6.7-3_all.deb ...
Unpacking python3-click (6.7-3) ...
Selecting previously unselected package python3-defusedxml.
Preparing to unpack .../27-python3-defusedxml_0.5.0-1ubuntu1_all.deb ...
Unpacking python3-defusedxml (0.5.0-1ubuntu1) ...
Selecting previously unselected package python3-dnspython.
Preparing to unpack .../28-python3-dnspython_1.15.0-1_all.deb ...
Unpacking python3-dnspython (1.15.0-1) ...
Selecting previously unselected package python3-greenlet.
Preparing to unpack .../29-python3-greenlet_0.4.12-2_amd64.deb ...
Unpacking python3-greenlet (0.4.12-2) ...
Selecting previously unselected package python3-eventlet.
Preparing to unpack .../30-python3-eventlet_0.25.0-0ubuntu1~cloud0_all.deb ...
Unpacking python3-eventlet (0.25.0-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-extras.
Preparing to unpack .../31-python3-extras_1.0.0-3_all.deb ...
Unpacking python3-extras (1.0.0-3) ...
Selecting previously unselected package python3-fasteners.
Preparing to unpack .../32-python3-fasteners_0.12.0-3_all.deb ...
Unpacking python3-fasteners (0.12.0-3) ...
Selecting previously unselected package python3-linecache2.
Preparing to unpack .../33-python3-linecache2_1.0.0-3_all.deb ...
Unpacking python3-linecache2 (1.0.0-3) ...
Selecting previously unselected package python3-mimeparse.
Preparing to unpack .../34-python3-mimeparse_1.6.0-2~cloud0_all.deb ...
Unpacking python3-mimeparse (1.6.0-2~cloud0) ...
Selecting previously unselected package python3-traceback2.
Preparing to unpack .../35-python3-traceback2_1.4.0-5_all.deb ...
Unpacking python3-traceback2 (1.4.0-5) ...
Selecting previously unselected package python3-unittest2.
Preparing to unpack .../36-python3-unittest2_1.1.0-6.1_all.deb ...
Unpacking python3-unittest2 (1.1.0-6.1) ...
Selecting previously unselected package python3-testtools.
Preparing to unpack .../37-python3-testtools_2.3.0-3ubuntu2_all.deb ...
Unpacking python3-testtools (2.3.0-3ubuntu2) ...
Selecting previously unselected package python3-fixtures.
Preparing to unpack .../38-python3-fixtures_3.0.0-2_all.deb ...
Unpacking python3-fixtures (3.0.0-2) ...
Selecting previously unselected package python3-itsdangerous.
Preparing to unpack .../39-python3-itsdangerous_0.24+dfsg1-2_all.deb ...
Unpacking python3-itsdangerous (0.24+dfsg1-2) ...
Selecting previously unselected package python3-jinja2.
Preparing to unpack .../40-python3-jinja2_2.10-1ubuntu0.18.04.1_all.deb ...
Unpacking python3-jinja2 (2.10-1ubuntu0.18.04.1) ...
Selecting previously unselected package python3-werkzeug.
Preparing to unpack .../41-python3-werkzeug_0.14.1+dfsg1-1_all.deb ...
Unpacking python3-werkzeug (0.14.1+dfsg1-1) ...
Selecting previously unselected package python3-flask.
Preparing to unpack .../42-python3-flask_1.0.2-3~cloud0_all.deb ...
Unpacking python3-flask (1.0.2-3~cloud0) ...
Selecting previously unselected package python3-flask-restful.
Preparing to unpack .../43-python3-flask-restful_0.3.6-1_all.deb ...
Unpacking python3-flask-restful (0.3.6-1) ...
Selecting previously unselected package python3-future.
Preparing to unpack .../44-python3-future_0.15.2-4ubuntu2_all.deb ...
Unpacking python3-future (0.15.2-4ubuntu2) ...
Selecting previously unselected package python3-futurist.
Preparing to unpack .../45-python3-futurist_1.8.1-2~cloud0_all.deb ...
Unpacking python3-futurist (1.8.1-2~cloud0) ...
Selecting previously unselected package python3-memcache.
Preparing to unpack .../46-python3-memcache_1.59-1~cloud0_all.deb ...
Unpacking python3-memcache (1.59-1~cloud0) ...
Selecting previously unselected package python3-oslo.context.
Preparing to unpack .../47-python3-oslo.context_1%3a2.23.0-0ubuntu1~cloud0_all.deb ...
Unpacking python3-oslo.context (1:2.23.0-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-pyinotify.
Preparing to unpack .../48-python3-pyinotify_0.9.6-1_all.deb ...
Unpacking python3-pyinotify (0.9.6-1) ...
Selecting previously unselected package python3-oslo.log.
Preparing to unpack .../49-python3-oslo.log_3.44.1-0ubuntu1~cloud0_all.deb ...
Unpacking python3-oslo.log (3.44.1-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-oslo.cache.
Preparing to unpack .../50-python3-oslo.cache_1.37.0-0ubuntu1~cloud0_all.deb ...
Unpacking python3-oslo.cache (1.37.0-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-pycadf.
Preparing to unpack .../51-python3-pycadf_2.7.0-0ubuntu1_all.deb ...
Unpacking python3-pycadf (2.7.0-0ubuntu1) ...
Selecting previously unselected package python3-webob.
Preparing to unpack .../52-python3-webob_1%3a1.8.5-1~cloud0_all.deb ...
Unpacking python3-webob (1:1.8.5-1~cloud0) ...
Selecting previously unselected package python3-keystonemiddleware.
Preparing to unpack .../53-python3-keystonemiddleware_7.0.1-0ubuntu1~cloud0_all.deb ...
Unpacking python3-keystonemiddleware (7.0.1-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-kombu.
Preparing to unpack .../54-python3-kombu_4.1.0-1_all.deb ...
Unpacking python3-kombu (4.1.0-1) ...
Selecting previously unselected package python3-pyasn1.
Preparing to unpack .../55-python3-pyasn1_0.4.2-3_all.deb ...
Unpacking python3-pyasn1 (0.4.2-3) ...
Selecting previously unselected package python3-pyasn1-modules.
Preparing to unpack .../56-python3-pyasn1-modules_0.2.1-0.2_all.deb ...
Unpacking python3-pyasn1-modules (0.2.1-0.2) ...
Selecting previously unselected package python3-ldap.
Preparing to unpack .../57-python3-ldap_3.0.0-1ubuntu0.1_amd64.deb ...
Unpacking python3-ldap (3.0.0-1ubuntu0.1) ...
Selecting previously unselected package python3-sqlparse.
Preparing to unpack .../58-python3-sqlparse_0.2.4-0.1_all.deb ...
Unpacking python3-sqlparse (0.2.4-0.1) ...
Selecting previously unselected package python3-tempita.
Preparing to unpack .../59-python3-tempita_0.5.2-2_all.deb ...
Unpacking python3-tempita (0.5.2-2) ...
Selecting previously unselected package python3-migrate.
Preparing to unpack .../60-python3-migrate_0.12.0-3~cloud0_all.deb ...
Unpacking python3-migrate (0.12.0-3~cloud0) ...
Selecting previously unselected package python3-posix-ipc.
Preparing to unpack .../61-python3-posix-ipc_0.9.8-3_amd64.deb ...
Unpacking python3-posix-ipc (0.9.8-3) ...
Selecting previously unselected package python3-oslo.concurrency.
Preparing to unpack .../62-python3-oslo.concurrency_3.30.0-0ubuntu1~cloud0_all.deb ...
Unpacking python3-oslo.concurrency (3.30.0-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-testresources.
Preparing to unpack .../63-python3-testresources_2.0.0-2_all.deb ...
Unpacking python3-testresources (2.0.0-2) ...
Selecting previously unselected package python3-testscenarios.
Preparing to unpack .../64-python3-testscenarios_0.5.0-2~cloud0_all.deb ...
Unpacking python3-testscenarios (0.5.0-2~cloud0) ...
Selecting previously unselected package python3-oslo.db.
Preparing to unpack .../65-python3-oslo.db_5.0.2-0ubuntu1~cloud0_all.deb ...
Unpacking python3-oslo.db (5.0.2-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-oslo.middleware.
Preparing to unpack .../66-python3-oslo.middleware_3.38.1-0ubuntu1~cloud0_all.deb ...
Unpacking python3-oslo.middleware (3.38.1-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-paste.
Preparing to unpack .../67-python3-paste_2.0.3+dfsg-4ubuntu1_all.deb ...
Unpacking python3-paste (2.0.3+dfsg-4ubuntu1) ...
Selecting previously unselected package python3-pastedeploy.
Preparing to unpack .../68-python3-pastedeploy_1.5.2-4_all.deb ...
Unpacking python3-pastedeploy (1.5.2-4) ...
Selecting previously unselected package python3-repoze.lru.
Preparing to unpack .../69-python3-repoze.lru_0.7-1_all.deb ...
Unpacking python3-repoze.lru (0.7-1) ...
Selecting previously unselected package python3-routes.
Preparing to unpack .../70-python3-routes_2.4.1-1_all.deb ...
Unpacking python3-routes (2.4.1-1) ...
Selecting previously unselected package python3-oslo.service.
Preparing to unpack .../71-python3-oslo.service_1.40.2-0ubuntu1~cloud0_all.deb ...
Unpacking python3-oslo.service (1.40.2-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-tenacity.
Preparing to unpack .../72-python3-tenacity_5.1.1-0ubuntu2~cloud0_all.deb ...
Unpacking python3-tenacity (5.1.1-0ubuntu2~cloud0) ...
Selecting previously unselected package python3-oslo.messaging.
Preparing to unpack .../73-python3-oslo.messaging_9.7.1-0ubuntu3~cloud0_all.deb ...
Unpacking python3-oslo.messaging (9.7.1-0ubuntu3~cloud0) ...
Selecting previously unselected package python3-oslo.policy.
Preparing to unpack .../74-python3-oslo.policy_2.3.2-0ubuntu1~cloud0_all.deb ...
Unpacking python3-oslo.policy (2.3.2-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-oslo.upgradecheck.
Preparing to unpack .../75-python3-oslo.upgradecheck_0.3.2-0ubuntu1~cloud0_all.deb ...
Unpacking python3-oslo.upgradecheck (0.3.2-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-osprofiler.
Preparing to unpack .../76-python3-osprofiler_2.8.2-0ubuntu2~cloud0_all.deb ...
Unpacking python3-osprofiler (2.8.2-0ubuntu2~cloud0) ...
Selecting previously unselected package python3-pastescript.
Preparing to unpack .../77-python3-pastescript_2.0.2-2_all.deb ...
Unpacking python3-pastescript (2.0.2-2) ...
Selecting previously unselected package python3-pymysql.
Preparing to unpack .../78-python3-pymysql_0.8.0-1_all.deb ...
Unpacking python3-pymysql (0.8.0-1) ...
Selecting previously unselected package xmlsec1.
Preparing to unpack .../79-xmlsec1_1.2.25-1build1_amd64.deb ...
Unpacking xmlsec1 (1.2.25-1build1) ...
Selecting previously unselected package python3-pysaml2.
Preparing to unpack .../80-python3-pysaml2_4.5.0+dfsg1-0ubuntu2~cloud0_all.deb ...
Unpacking python3-pysaml2 (4.5.0+dfsg1-0ubuntu2~cloud0) ...
Selecting previously unselected package python3-scrypt.
Preparing to unpack .../81-python3-scrypt_0.8.0-0ubuntu3_amd64.deb ...
Unpacking python3-scrypt (0.8.0-0ubuntu3) ...
Selecting previously unselected package python3-sqlalchemy-ext.
Preparing to unpack .../82-python3-sqlalchemy-ext_1.2.18+ds1-2ubuntu2~cloud0_amd64.deb ...
Unpacking python3-sqlalchemy-ext (1.2.18+ds1-2ubuntu2~cloud0) ...
Selecting previously unselected package keystone-common.
Preparing to unpack .../83-keystone-common_2%3a16.0.0-0ubuntu1~cloud0_all.deb ...
Unpacking keystone-common (2:16.0.0-0ubuntu1~cloud0) ...
Selecting previously unselected package python3-bcrypt.
Preparing to unpack .../84-python3-bcrypt_3.1.4-2_amd64.deb ...
Unpacking python3-bcrypt (3.1.4-2) ...
Selecting previously unselected package python3-passlib.
Preparing to unpack .../85-python3-passlib_1.7.1-1_all.deb ...
Unpacking python3-passlib (1.7.1-1) ...
Selecting previously unselected package python3-keystone.
Preparing to unpack .../86-python3-keystone_2%3a16.0.0-0ubuntu1~cloud0_all.deb ...
Unpacking python3-keystone (2:16.0.0-0ubuntu1~cloud0) ...
Selecting previously unselected package keystone.
Preparing to unpack .../87-keystone_2%3a16.0.0-0ubuntu1~cloud0_all.deb ...
Unpacking keystone (2:16.0.0-0ubuntu1~cloud0) ...
Setting up libjs-jquery (3.2.1-1) ...
Setting up python3-fasteners (0.12.0-3) ...
Setting up libapr1:amd64 (1.6.3-2) ...
Setting up python3-werkzeug (0.14.1+dfsg1-1) ...
Setting up python3-dnspython (1.15.0-1) ...
Setting up python3-linecache2 (1.0.0-3) ...
Setting up python3-sqlalchemy (1.2.18+ds1-2ubuntu2~cloud0) ...
Setting up python3-sqlalchemy-ext (1.2.18+ds1-2ubuntu2~cloud0) ...
Setting up python3-passlib (1.7.1-1) ...
Setting up python3-oslo.context (1:2.23.0-0ubuntu1~cloud0) ...
Setting up libxmlsec1-openssl:amd64 (1.2.25-1build1) ...
Setting up python3-memcache (1.59-1~cloud0) ...
Setting up libjs-underscore (1.8.3~dfsg-1) ...
Setting up python3-greenlet (0.4.12-2) ...
Setting up python3-scrypt (0.8.0-0ubuntu3) ...
Setting up python3-sqlparse (0.2.4-0.1) ...
Setting up python3-tempita (0.5.2-2) ...
Setting up python3-webob (1:1.8.5-1~cloud0) ...
Setting up python3-bcrypt (3.1.4-2) ...
Setting up python3-posix-ipc (0.9.8-3) ...
Setting up python3-futurist (1.8.1-2~cloud0) ...
Setting up python3-colorama (0.3.7-1) ...
Setting up python3-alembic (1.0.0-2ubuntu2~cloud0) ...
Setting up libjs-sphinxdoc (1.8.5-3~cloud0) ...
Setting up python3-eventlet (0.25.0-0ubuntu1~cloud0) ...
Setting up apache2-data (2.4.29-1ubuntu4.11) ...
Setting up keystone-common (2:16.0.0-0ubuntu1~cloud0) ...
Setting up python3-extras (1.0.0-3) ...
Setting up python3-tenacity (5.1.1-0ubuntu2~cloud0) ...
Setting up python3-oslo.policy (2.3.2-0ubuntu1~cloud0) ...
Setting up python3-traceback2 (1.4.0-5) ...
Setting up python3-pyasn1 (0.4.2-3) ...
Setting up pycadf-common (2.7.0-0ubuntu1) ...
Setting up python3-future (0.15.2-4ubuntu2) ...
update-alternatives: using /usr/bin/python3-futurize to provide /usr/bin/futurize (futurize) in auto mode
update-alternatives: using /usr/bin/python3-pasteurize to provide /usr/bin/pasteurize (pasteurize) in auto mode
Setting up python3-defusedxml (0.5.0-1ubuntu1) ...
Setting up python3-unittest2 (1.1.0-6.1) ...
update-alternatives: using /usr/bin/python3-unit2 to provide /usr/bin/unit2 (unit2) in auto mode
Setting up python3-pycadf (2.7.0-0ubuntu1) ...
Setting up libaprutil1:amd64 (1.6.1-2) ...
Setting up python3-jinja2 (2.10-1ubuntu0.18.04.1) ...
Setting up python3-repoze.lru (0.7-1) ...
Setting up python3-pyasn1-modules (0.2.1-0.2) ...
Setting up python3-paste (2.0.3+dfsg-4ubuntu1) ...
Setting up python3-migrate (0.12.0-3~cloud0) ...
Setting up python3-mimeparse (1.6.0-2~cloud0) ...
Setting up python3-pymysql (0.8.0-1) ...
Setting up python3-anyjson (0.3.3-1build1) ...
Setting up liblua5.2-0:amd64 (5.2.4-1.1build1) ...
Setting up xmlsec1 (1.2.25-1build1) ...
Setting up python-pastedeploy-tpl (1.5.2-4) ...
Setting up javascript-common (11) ...
Package apache2 is not configured yet. Will defer actions by package javascript-common.
Setting up python3-cachetools (3.1.0-2~cloud0) ...
Setting up python3-vine (1.1.4+dfsg-2) ...
Setting up python3-itsdangerous (0.24+dfsg1-2) ...
Setting up python3-aniso8601 (2.0.0-1) ...
Setting up python3-oslo.upgradecheck (0.3.2-0ubuntu1~cloud0) ...
Setting up alembic (1.0.0-2ubuntu2~cloud0) ...
Setting up python3-routes (2.4.1-1) ...
Setting up python3-pyinotify (0.9.6-1) ...
Setting up libaprutil1-ldap:amd64 (1.6.1-2) ...
Setting up python3-oslo.middleware (3.38.1-0ubuntu1~cloud0) ...
Setting up python3-ldap (3.0.0-1ubuntu0.1) ...
Setting up libaprutil1-dbd-sqlite3:amd64 (1.6.1-2) ...
Setting up python3-amqp (2.5.0-2~cloud0) ...
Setting up apache2-utils (2.4.29-1ubuntu4.11) ...
Setting up python3-pysaml2 (4.5.0+dfsg1-0ubuntu2~cloud0) ...
update-alternatives: using /usr/bin/python3-make_metadata to provide /usr/bin/make_metadata (make_metadata) in auto mode
update-alternatives: using /usr/bin/python3-mdexport to provide /usr/bin/mdexport (mdexport) in auto mode
update-alternatives: using /usr/bin/python3-parse_xsd2 to provide /usr/bin/parse_xsd2 (parse_xsd2) in auto mode
update-alternatives: using /usr/bin/python3-merge_metadata to provide /usr/bin/merge_metadata (merge_metadata) in auto mode
Setting up python3-click (6.7-3) ...
Setting up apache2-bin (2.4.29-1ubuntu4.11) ...
Setting up python3-kombu (4.1.0-1) ...
Setting up python3-testresources (2.0.0-2) ...
Setting up python3-pastedeploy (1.5.2-4) ...
Setting up python3-oslo.log (3.44.1-0ubuntu1~cloud0) ...
Setting up libapache2-mod-wsgi-py3 (4.5.17-1) ...
Package apache2 is not configured yet. Will defer actions by package libapache2-mod-wsgi-py3.
Setting up python3-flask (1.0.2-3~cloud0) ...
Setting up apache2 (2.4.29-1ubuntu4.11) ...
Enabling module mpm_event.
Enabling module authz_core.
Enabling module authz_host.
Enabling module authn_core.
Enabling module auth_basic.
Enabling module access_compat.
Enabling module authn_file.
Enabling module authz_user.
Enabling module alias.
Enabling module dir.
Enabling module autoindex.
Enabling module env.
Enabling module mime.
Enabling module negotiation.
Enabling module setenvif.
Enabling module filter.
Enabling module deflate.
Enabling module status.
Enabling module reqtimeout.
Enabling conf charset.
Enabling conf localized-error-pages.
Enabling conf other-vhosts-access-log.
Enabling conf security.
Enabling conf serve-cgi-bin.
Enabling site 000-default.
info: Executing deferred 'a2enconf javascript-common' for package javascript-common
Enabling conf javascript-common.
info: Executing deferred 'a2enmod wsgi' for package libapache2-mod-wsgi-py3
Enabling module wsgi.
Created symlink /etc/systemd/system/multi-user.target.wants/apache2.service → /lib/systemd/system/apache2.service.
Created symlink /etc/systemd/system/multi-user.target.wants/apache-htcacheclean.service → /lib/systemd/system/apache-htcacheclean.service.
Setting up python3-oslo.cache (1.37.0-0ubuntu1~cloud0) ...
Setting up python3-pastescript (2.0.2-2) ...
Setting up python3-flask-restful (0.3.6-1) ...
Setting up python3-keystonemiddleware (7.0.1-0ubuntu1~cloud0) ...
Setting up python3-fixtures (3.0.0-2) ...
Setting up python3-oslo.concurrency (3.30.0-0ubuntu1~cloud0) ...
Setting up python3-testtools (2.3.0-3ubuntu2) ...
Setting up python3-oslo.service (1.40.2-0ubuntu1~cloud0) ...
Setting up python3-oslo.messaging (9.7.1-0ubuntu3~cloud0) ...
Setting up python3-osprofiler (2.8.2-0ubuntu2~cloud0) ...
Setting up python3-testscenarios (0.5.0-2~cloud0) ...
Setting up python3-oslo.db (5.0.2-0ubuntu1~cloud0) ...
Setting up python3-keystone (2:16.0.0-0ubuntu1~cloud0) ...
Setting up keystone (2:16.0.0-0ubuntu1~cloud0) ...
apache2_invoke: Enable site keystone.conf
Processing triggers for libc-bin (2.27-3ubuntu1) ...
Processing triggers for systemd (237-3ubuntu10.33) ...
Processing triggers for man-db (2.8.3-2ubuntu0.1) ...
Processing triggers for ufw (0.36-0ubuntu0.18.04.1) ...
Processing triggers for ureadahead (0.100.0-21) ...


wei@wei-ThinkPad-X1-Extreme:~$ sudo sed -i "s%connection = sqlite:////var/lib/keystone/keystone.db%# &\nconnection=mysql+pymysql://keystone:KEYSTONE_DBPASS@localhost/keystone%;s/^\[token\]$/&\nprovider = fernet/" /etc/keystone/keystone.conf



wei@wei-ThinkPad-X1-Extreme:~$ sudo su -s /bin/sh -c "keystone-manage db_sync" keystone

wei@wei-ThinkPad-X1-Extreme:~$ sudo keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone
wei@wei-ThinkPad-X1-Extreme:~$ sudo keystone-manage credential_setup --keystone-user keystone --keystone-group keystone

wei@wei-ThinkPad-X1-Extreme:~$ sudo keystone-manage bootstrap \
> --bootstrap-password ADMIN_PASS \
> --bootstrap-admin-url http://controller:5000/v3/ \
> --bootstrap-internal-url http://controller:5000/v3/ \
> --bootstrap-public-url http://controller:5000/v3/ \
> --bootstrap-region-id RegionOne


wei@wei-ThinkPad-X1-Extreme:~$ sudo sed -i "1 i\
ServerName localhost" /etc/apache2/apache2.conf

wei@wei-ThinkPad-X1-Extreme:~$ sudo systemctl status apache2.service
● apache2.service - The Apache HTTP Server
   Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: 
  Drop-In: /lib/systemd/system/apache2.service.d
           └─apache2-systemd.conf
   Active: active (running) since Fri 2020-01-31 21:32:41 CST; 57min ago
 Main PID: 19685 (apache2)
    Tasks: 75 (limit: 4915)
   CGroup: /system.slice/apache2.service
           ├─19685 /usr/sbin/apache2 -k start
           ├─20040 (wsgi:keystone-pu -k start
           ├─20041 (wsgi:keystone-pu -k start
           ├─20042 (wsgi:keystone-pu -k start
           ├─20043 (wsgi:keystone-pu -k start
           ├─20044 (wsgi:keystone-pu -k start
           ├─20517 /usr/sbin/apache2 -k start
           └─20518 /usr/sbin/apache2 -k start

1月 31 21:32:41 wei-ThinkPad-X1-Extreme systemd[1]: Starting The Apache HTTP Ser
1月 31 21:32:41 wei-ThinkPad-X1-Extreme apachectl[19674]: AH00558: apache2: Coul
1月 31 21:32:41 wei-ThinkPad-X1-Extreme systemd[1]: Started The Apache HTTP Serv
1月 31 21:32:45 wei-ThinkPad-X1-Extreme systemd[1]: Reloading The Apache HTTP Se
1月 31 21:32:45 wei-ThinkPad-X1-Extreme apachectl[20036]: AH00558: apache2: Coul
1月 31 21:32:45 wei-ThinkPad-X1-Extreme systemd[1]: Reloaded The Apache HTTP Ser

wei@wei-ThinkPad-X1-Extreme:~$ sudo systemctl restart apache2.service



wei@wei-ThinkPad-X1-Extreme:~$ cat > admin-openrc << EOF
> export OS_USERNAME=admin
> export OS_PASSWORD=ADMIN_PASS
> export OS_PROJECT_NAME=admin
> export OS_USER_DOMAIN_NAME=Default
> export OS_PROJECT_DOMAIN_NAME=Default
> export OS_AUTH_URL=http://controller:5000/v3
> export OS_IDENTITY_API_VERSION=3
> EOF



wei@wei-ThinkPad-X1-Extreme:~$ sudo mysql -u keystone --password=KEYSTONE_DBPASS --execute="use keystone;show tables;"
+------------------------------------+
| Tables_in_keystone                 |
+------------------------------------+
| access_rule                        |
| access_token                       |
| application_credential             |
| application_credential_access_rule |
| application_credential_role        |
| assignment                         |
| config_register                    |
| consumer                           |
| credential                         |
| endpoint                           |
| endpoint_group                     |
| federated_user                     |
| federation_protocol                |
| group                              |
| id_mapping                         |
| identity_provider                  |
| idp_remote_ids                     |
| implied_role                       |
| limit                              |
| local_user                         |
| mapping                            |
| migrate_version                    |
| nonlocal_user                      |
| password                           |
| policy                             |
| policy_association                 |
| project                            |
| project_endpoint                   |
| project_endpoint_group             |
| project_option                     |
| project_tag                        |
| region                             |
| registered_limit                   |
| request_token                      |
| revocation_event                   |
| role                               |
| role_option                        |
| sensitive_config                   |
| service                            |
| service_provider                   |
| system_assignment                  |
| token                              |
| trust                              |
| trust_role                         |
| user                               |
| user_group_membership              |
| user_option                        |
| whitelisted_config                 |
+------------------------------------+


wei@wei-ThinkPad-X1-Extreme:~$ sudo mysql -u keystone --password=KEYSTONE_DBPASS --execute="use keystone;select * from local_user;"
+----+----------------------------------+-----------+-------+-------------------+----------------+
| id | user_id                          | domain_id | name  | failed_auth_count | failed_auth_at |
+----+----------------------------------+-----------+-------+-------------------+----------------+
|  1 | 469a7502495740c581a3e380ca1d4bbd | default   | admin |                 0 | NULL           |
+----+----------------------------------+-----------+-------+-------------------+----------------+



wei@wei-ThinkPad-X1-Extreme:~$ . openrc 

wei@wei-ThinkPad-X1-Extreme:~$ openstack domain create --description "An example domain" example
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | An example domain                |
| enabled     | True                             |
| id          | 17e1483f7f5f433b8c37c79a9ef06c6b |
| name        | example                          |
| options     | {}                               |
| tags        | []                               |
+-------------+----------------------------------+


wei@wei-ThinkPad-X1-Extreme:~$ openstack project create --domain default --description "Service Project" service
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Service Project                  |
| domain_id   | default                          |
| enabled     | True                             |
| id          | a48e9b4ada224144a47484572ec3414f |
| is_domain   | False                            |
| name        | service                          |
| options     | {}                               |
| parent_id   | default                          |
| tags        | []                               |
+-------------+----------------------------------+


wei@wei-ThinkPad-X1-Extreme:~$ openstack project create --domain default --description "Demo project" myproject
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Demo project                     |
| domain_id   | default                          |
| enabled     | True                             |
| id          | b7bec05ce59140e9aa6ded0c3e8fc410 |
| is_domain   | False                            |
| name        | myproject                        |
| options     | {}                               |
| parent_id   | default                          |
| tags        | []                               |
+-------------+----------------------------------+



wei@wei-ThinkPad-X1-Extreme:~$ openstack user create --domain default --password MYUSER_PASS myuser
+---------------------+----------------------------------+
| Field               | Value                            |
+---------------------+----------------------------------+
| domain_id           | default                          |
| enabled             | True                             |
| id                  | 65a80e0e33624978b3c0ea7cca206462 |
| name                | myuser                           |
| options             | {}                               |
| password_expires_at | None                             |
+---------------------+----------------------------------+

wei@wei-ThinkPad-X1-Extreme:~$ openstack role create myrole
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | None                             |
| domain_id   | None                             |
| id          | 0a7e1e1c90224fb286fbacdfb3e00c00 |
| name        | myrole                           |
| options     | {}                               |
+-------------+----------------------------------+
wei@wei-ThinkPad-X1-Extreme:~$ openstack role add --project myproject --user myuser myrole






wei@wei-ThinkPad-X1-Extreme:~$ sed -i "$ a\
export OS_IMAGE_API_VERSION=2" admin-openrc


wei@wei-ThinkPad-X1-Extreme:~$ cp admin-openrc demo-openrc
wei@wei-ThinkPad-X1-Extreme:~$ sed -i "s/OS_PROJECT_NAME=admin/OS_PROJECT_NAME=myproject/;s/OS_USERNAME=admin/OS_USERNAME=myuser/;s/OS_PASSWORD=ADMIN_PASS/OS_PASSWORD=MYUSER_PASS/" demo-openrc 


wei@wei-ThinkPad-X1-Extreme:~$ . demo-openrc 
wei@wei-ThinkPad-X1-Extreme:~$ openstack project list
+----------------------------------+-----------+
| ID                               | Name      |
+----------------------------------+-----------+
| b7bec05ce59140e9aa6ded0c3e8fc410 | myproject |
+----------------------------------+-----------+
wei@wei-ThinkPad-X1-Extreme:~$ openstack user list
You are not authorized to perform the requested action: identity:list_users. (HTTP 403) (Request-ID: req-ce8aca6e-7806-43c3-9d6c-5c65b4afddd3)
wei@wei-ThinkPad-X1-Extreme:~$ openstack user show myuser
+---------------------+----------------------------------+
| Field               | Value                            |
+---------------------+----------------------------------+
| domain_id           | default                          |
| enabled             | True                             |
| id                  | 65a80e0e33624978b3c0ea7cca206462 |
| name                | myuser                           |
| options             | {}                               |
| password_expires_at | None                             |
+---------------------+----------------------------------+


wei@wei-ThinkPad-X1-Extreme:~$ openstack token issue
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field      | Value                                                                                                                                                                                   |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| expires    | 2020-01-31T15:53:28+0000                                                                                                                                                                |
| id         | gAAAAABeND9ohlNJzI_U1u36jvISnZOxwSod57-shSHDVPuSKS2bDRkwf5i4nj8iR2Ziqp_bZL6xnZ5_7pADpzm5cab62JKVZEkLD7J3x0EliLFNKFpHB_ukAuRicmiEl0TkC-z3_XoMmK-U-HC9aR_Zm37FY7PP60M4bjNqHRu5pdV8hMSEcD8 |
| project_id | b7bec05ce59140e9aa6ded0c3e8fc410                                                                                                                                                        |
| user_id    | 65a80e0e33624978b3c0ea7cca206462                                                                                                                                                        |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+








